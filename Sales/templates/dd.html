<!DOCTYPE html>
<html lang="en">
{% load static %}


<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="keywords" content="">
  <meta name="author" content="">
  <meta name="robots" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="W3crm:Customer Relationship Management Admin Bootstrap 5 Template">
  <meta property="og:title" content="W3crm:Customer Relationship Management Admin Bootstrap 5 Template">
  <meta property="og:description" content="W3crm:Customer Relationship Management Admin Bootstrap 5 Template">
  <meta property="og:image" content="social-image.png">
  <meta name="format-detection" content="telephone=no">

  <!-- PAGE TITLE HERE -->
  <title>Lead Management Dashboard</title>
  <!-- FAVICONS ICON -->
  <link rel="shortcut icon" type="image/png" href="../static/images/favicon.png">

  <link href="../static/../static/vendor/bootstrap-select/dist/css/bootstrap-select.min.css" rel="stylesheet">
  <link href="../static/vendor/swiper/css/swiper-bundle.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Material+Icons" rel="stylesheet">
  <link rel="stylesheet" href="../../cdnjs.cloudflare.com/ajax/libs/noUiSlider/14.6.4/nouislider.min.css">
  <link href="../static/vendor/datatables/css/jquery.dataTables.min.css" rel="stylesheet">
  <link href="../static/vendor/jvmap/jquery-jvectormap.css" rel="stylesheet">
  <link href="../../cdn.datatables.net/buttons/1.6.4/css/buttons.dataTables.min.css" rel="stylesheet">
  <link href="../static/vendor/bootstrap-datetimepicker/css/bootstrap-datetimepicker.min.css" rel="stylesheet">

  <!-- tagify-css -->
  <link href="../static/vendor/tagify/dist/tagify.css" rel="stylesheet">

  <!-- Style css -->
  <link href="../static/style.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <!-- old links and scripts -->

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
  <!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"> -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
  <link rel="stylesheet" href="https://maxcdn.boometismenutstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">


  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>



  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-b5kHyXgcpbZJO/tY9Ul7kGkf1S0CWuKcCD38l8YkeH8z8QjE0GmW1gYU5S9FOnJ0"
    crossorigin="anonymous"></script>

  <link rel="apple-touch-icon" href="{% static 'appassets/images/ico/apple-icon-120.png' %}">

  <link rel="shortcut icon" type="image/x-icon" href="{% static 'appassets/images/logo/favicon.ico' %}">

  <link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,300;0,400;0,500;0,600;1,400;1,500;1,600"
    rel="stylesheet">


  <style>

.card {
      box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2);
      /* this adds the "card" effect */
      padding: 16px;
      text-align: center;
      background-color: #fffdfd;
    }
    .pagination {
      margin: 0;
    }

    .pagination li:hover {
      cursor: pointer;
    }

    .header_wrap {
      padding: 30px 0;
    }

    .num_rows {
      width: 20%;
      float: left;
    }

    .tb_search {
      width: 20%;
      float: right;
    }

    .pagination-container {
      width: 70%;
      float: left;
    }

    .rows_count {
      width: 20%;
      float: right;
      text-align: right;
      color: #999;
    }

    #pagination {
      border: 1px solid #b3e2fd;
      cursor: pointer;

    }

    #pagination {
      text-align: center;
    }

    #pagination button {
      background-color: #56a0ef;
      color: white;
      border: none;
      padding: 8px 16px;
      margin: 2px;
      border-radius: 4px;
      cursor: pointer;
    }

    #pagination button:hover {
      background-color: #8ebbea;
    }

    @media only screen and (max-width: 767px) {

      /* Add your CSS styles specific to mobile phones here */
      /* For example, you can change font sizes or padding */
      body {
        font-size: 14px;
        /* Adjust the font size for better readability on mobile */
      }

      .side-navbar {
        font-size: 8px;
        /* Adjust the font size of the side navbar for mobile */
      }

      /* You can add more styles specific to mobile view here */
    }

    /* For tablets (portrait and landscape) */
    @media only screen and (min-width: 768px) and (max-width: 991px) {
      /* Add your CSS styles specific to tablets here */
      /* For example, you can adjust the size or position of elements */
    }

    /* For laptops and larger screens */
    @media only screen and (min-width: 992px) {
      /* Add your CSS styles specific to laptops and larger screens here */
      /* For example, you can modify the layout or margins */
    }



    /* Your other styles for the popup container and content */

    /* Media query for tablets and larger */
    @media screen and (min-width: 768px) {
      .modal-content {
        width: 600px;
        /* Adjust the width as needed for tablets */
        margin: 0 auto;
        /* Center the modal horizontally */
      }
    }

    /* Media query for mobile phones */
    @media screen and (max-width: 767px) {
      .modal-content {
        width: 90%;
        /* Make the modal almost full width on small screens */
        margin: 30px auto;
        /* Add some margin for better spacing */
      }

      .modal-body {
        display: flex;
        flex-wrap: wrap;
        /* Allow the form elements to wrap to a new line */
        justify-content: center;
        /* Center the form elements within the modal */
      }

      .modal-body>div {
        width: 100%;
        /* Make each form section full width on mobile */
      }

      /* Adjust individual form elements as needed for mobile view */
      .form-group {
        width: 100%;
      }

      /* Add any other mobile-specific styling here */
    }

    .deznav {
      width: 15rem;
      padding-bottom: 10px;
      height: calc(100% - 3.125rem);
      position: absolute;
      top: 3.125rem;
      padding-top: 1rem;
      z-index: 6;
      background-color: var(--sidebar-bg);
      border-right: 1px solid #E6E6E6;
      transition: all .2s ease;
      box-shadow: 0rem 0.9375rem 1.875rem 0rem rgba(0, 0, 0, 0.02);
    }
  </style>
</head>

<body data-typography="poppins" data-theme-version="light" data-layout="vertical" data-nav-headerbg="black"
  data-headerbg="color_1">

  <!--*******************
        Preloader start
    ********************-->
  <div id="preloader">
    <div class="lds-ripple">
      <div></div>
      <div></div>
    </div>
  </div>


  <!--**********************************
        Main wrapper start
    ***********************************-->
  <div id="main-wrapper">
    <!--**********************************
            Nav header start
        ***********************************-->
    <div class="nav-header">
      <a href="index.html" class="brand-logo">
        <img src="../static/images/olatech_logo.png" width="190">
      </a>
      <div class="nav-control">
        <div class="hamburger">
          <span class="line"></span>
          <span class="line"></span>
          <span class="line"></span>
        </div>
      </div>
    </div>
    <!--**********************************
            Nav header end
        ***********************************-->



    <!--**********************************
            Sidebar start
        ***********************************-->
    <div class="deznav">
      <div class="deznav-scroll">
        <ul class="metismenu" id="menu">
          <li class="menu-title">Lead Management OLATECHS</li>

          <li><a class="has-arrow " href="javascript:void(0);" aria-expanded="false">
              <div class="menu-icon">
                <svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M14.4065 14.8714H7.78821" stroke="#888888" stroke-linecap="round" stroke-linejoin="round" />
                  <path d="M14.4065 11.0338H7.78821" stroke="#888888" stroke-linecap="round" stroke-linejoin="round" />
                  <path d="M10.3137 7.2051H7.78827" stroke="#888888" stroke-linecap="round" stroke-linejoin="round" />
                  <path fill-rule="evenodd" clip-rule="evenodd"
                    d="M14.5829 2.52066C14.5829 2.52066 7.54563 2.52433 7.53463 2.52433C5.00463 2.53991 3.43805 4.20458 3.43805 6.74374V15.1734C3.43805 17.7254 5.01655 19.3965 7.56855 19.3965C7.56855 19.3965 14.6049 19.3937 14.6168 19.3937C17.1468 19.3782 18.7143 17.7126 18.7143 15.1734V6.74374C18.7143 4.19174 17.1349 2.52066 14.5829 2.52066Z"
                    stroke="#888888" stroke-linecap="round" stroke-linejoin="round" />
                </svg>
              </div>

              <span class="nav-text">Forms</span>
            </a>
            <ul aria-expanded="false">
              <li><a href="{% url 'dashboard' %}">Dashboard</a></li>

              <li><a href="{% url 'customer_list' %}">Sales Lead</a></li>
              <li><a href="{% url 'branch_list' %}">Branch</a></li>
              <li><a href="{% url 'manager_list' %}">Manager List</a></li>
              <li><a href="{% url 'executive_list' %}">Executive List</a></li>
              <li><a href="{% url 'staff'%}">Staff</a></li>

            </ul>
          </li>
          <li><a class="has-arrow " href="javascript:void(0);" aria-expanded="false">
              <div class="menu-icon">
                <svg width="16" height="15" viewBox="0 0 16 15" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M6.46932 12.2102H0.693665" stroke="#888888" stroke-linecap="round" stroke-linejoin="round" />
                  <path d="M9.04547 3.32535H14.8211" stroke="#888888" stroke-linecap="round" stroke-linejoin="round" />
                  <path fill-rule="evenodd" clip-rule="evenodd"
                    d="M4.99912 3.27573C4.99912 2.08805 4.02914 1.125 2.8329 1.125C1.63667 1.125 0.666687 2.08805 0.666687 3.27573C0.666687 4.46342 1.63667 5.42647 2.8329 5.42647C4.02914 5.42647 4.99912 4.46342 4.99912 3.27573Z"
                    stroke="#888888" stroke-linecap="round" stroke-linejoin="round" />
                  <path fill-rule="evenodd" clip-rule="evenodd"
                    d="M15.3333 12.1743C15.3333 10.9866 14.3641 10.0235 13.1679 10.0235C11.9709 10.0235 11.0009 10.9866 11.0009 12.1743C11.0009 13.3619 11.9709 14.325 13.1679 14.325C14.3641 14.325 15.3333 13.3619 15.3333 12.1743Z"
                    stroke="#888888" stroke-linecap="round" stroke-linejoin="round" />
                </svg>
              </div>
              <span class="nav-text">Table</span>
            </a>
            <ul aria-expanded="false">
              <li><a href="{% url 'user_list' %}">User's</a></li>
              <li><a href="{% url 'role_display' %}">Roles</a></li>
            </ul>
          </li>

        </ul>

      </div>
    </div>

    <!--**********************************
            Sidebar end
        ***********************************-->

    <!--**********************************
            Content body start
        ***********************************-->
    <div class="content-body">
      <!-- row -->
      <div class="page-titles">
        <ol class="breadcrumb">
          <li>
            <h3 class="bc-title">Sales Lead Data</h3>
          </li> <br>
          
          <button type="button" class="btn btn-info" data-bs-toggle="dropdown" aria-expanded="false" style="margin-left: 900px; margin-right: 10px;">
            Hello, {{ request.session.username }}
          </button>
          <!-- Button trigger modal -->
         <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#exampleModal" style="margin-right: 10px;">
             Add <i class="fa fa-plus"></i>
         </button>

          <a href="{% url 'logout' %}" class="btn btn-primary" data-toggle="modal"><i class="material-icons"></i>
            <span>Logout</span></a>

          <!-- <li class="breadcrumb-item active"><a href="javascript:void(0)">Dashboard</a></li> -->
        </ol>
      </div>
<br>


        <div class="text-left"  style="margin-left:900px;"  >

         
        </div>
     
        <div class="card">
      
          <div class="container-fluid">
            <div class="col-md-12" >
              <div class="row">
            <div class="col-md-2 p-2"><label for="startDate"><b>Start Date:</b></label>
              <input type="date" id="startDate" class="form-control"></div>

            <div class="col-md-2 p-2"><label for="endDate"><b>End Date:</b></label>
              <input type="date" id="endDate" class="form-control"></div>          
            
              <div class="col-md-2 ms-auto mt-4">
                <input type="text" id="searchInput" placeholder="Search..." class="form-control">
              </div>
            </div>
          </div>
        </div>
        
          
        
          <br>
          <div class="table-responsive">


            <table class="table table-striped" id="table">

              <thead>
                <tr style="background-color:rgb(169, 192, 222);color:rgb(18, 16, 16);">

                  <th>ID</th>
                  <th>Branch Name</th>
                  <th>Manager Name</th>
                  <th>Executive Name</th>
                  <th>Company Name</th>
                  <th>Type of Client</th>
                  <th>Client Status</th>
                  <th>Client Name</th>
                  <th>Contact No</th>
                  <th>Address</th>

                  <!-- <th>Mail ID</th> -->
                  <!-- <th>Nature of Business</th> -->
                  <th>Updation Date</th>
                  <th>Meeting Date</th>
                  <!-- <th>Status of Client</th> -->
                  <th>Next Meeting Date</th>
                  <!-- <th>Package Sold</th> -->
                  <th>Contract Value</th>
                  <th>Advance</th>
                  <th>Balance Payment</th>
                  <th>Activation Date</th>
                  <th>Renewal Date</th>
                  <!-- <th>Action</th> -->

                </tr>
              </thead>
              <tbody>

                {% for customer in page_obj %}
                <tr id="{{ customer.id }}" >
                 
         
                  <td><a style="color: black;" href="{% url 'customer_detail' customer.id %}">{{ customer.id}}</a></td>
                  <td><a style="color: black;" href="{% url 'customer_detail' customer.id %}">{{ customer.branch_list
                      }}</a>
                  </td>
                  <td><a style="color: black;" href="{% url 'customer_detail' customer.id %}">{{ customer.manager_name
                      }}</a>
                  </td>
                  <td><a style="color: black;" href="{% url 'customer_detail' customer.id %}">{{ customer.ex_name }}</a>
                  </td>

                  <td><a style="color: black;" href="{% url 'customer_detail' customer.id %}">{{ customer.company_name
                      }}</a>
                  </td>
                  <td><a style="color: black;" href="{% url 'customer_detail' customer.id %}">{{ customer.type_of_client
                      }}</a>
                  </td>
                  <td><a style="color: black;" href="{% url 'customer_detail' customer.id %}">{{ customer.subpoints
                      }}</a>
                  </td>
                  <td><a style="color: black;" href="{% url 'customer_detail' customer.id %}">{{ customer.name }}</a>
                  </td>
                  <td><a style="color: black;" href="{% url 'customer_detail' customer.id %}">{{ customer.contact_detail
                      }}</a>
                  </td>
                  <td><a style="color: black;" href="{% url 'customer_detail' customer.id %}">{{ customer.address }}</a>

                  </td>
                  <td><a style="color: black;" href="{% url 'customer_detail' customer.id %}">{{
                      customer.updation_date|date:"Y-m-d H:i:s" }}</a></td>



                  <td><a style="color: black;" href="{% url 'customer_detail' customer.id %}">{{ customer.meeting_date
                      }}</a>
                  </td>
                  <!-- <td><a style="color: black;" href="{% url 'customer_detail' customer.id %}">{{ customer.status_of_client }}</a></td> -->
                  <td><a style="color: black;" href="{% url 'customer_detail' customer.id %}">{{
                      customer.next_meeting_date}}</a></td>
                  <!-- <td><a style="color: black;" href="{% url 'customer_detail' customer.id %}">{{ customer.package_sold }}</a></td> -->
                  <td><a style="color: black;" href="{% url 'customer_detail' customer.id %}">{{ customer.amount }}</a>
                  </td>
                  <td><a style="color: black;" href="{% url 'customer_detail' customer.id %}">{{ customer.add_advance
                      }}</a>
                  </td>
                  <td><a style="color: black;" href="{% url 'customer_detail' customer.id %}">{{
                      customer.balance_payment
                      }}</a>
                  </td>

                  <td><a style="color: black;" href="{% url 'customer_detail' customer.id %}">{{
                      customer.activation_date
                      }}</a></td>
                  <td><a style="color: black;" href="{% url 'customer_detail' customer.id %}">{{ customer.renewal_date
                      }}</a></td>

                </tr>
                {% endfor %}
              </tbody>
            </table>
          </div>
          <div id="pagination">

          </div>

        </div>



      </div>

    </div>



<!-- Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <form action="{% url 'add' %}" method="post">
        {% csrf_token %}
        <div class="modal-header">
          <h4 class="modal-title">Add Customer</h4>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          <!-- <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button> -->
        </div>
      <div class="modal-body">
        <div class="form-group">
          <label>Branch Name</label>
          <select name="branch_name" id="branch" class="form-control" aria-label="Default select example"
            aria-invalid="false">
            <option value="{{customer.branch_list}}">Select branch</option>

            {% for i in branches %}
            <option value="{{i.branch_name}}"> {{i.branch_name}}</option>
            {% endfor %}
          </select>


        </div>
        <div class="form-group">
          <label>Manager Name</label>
          <select name="manager_name" id="manageri_name" value="{{i.manager_name}}" class="form-control"
            aria-label="Default select example" aria-invalid="false">
            <option value="{{customer.manager_name}}">{{customer.manager_name}}</option>

            {% for i in rm1 %}
            <option value="{{i.manager_name}}"> {{i.manager_name}}</option>
            {% endfor %}
          </select>


        </div>
        <div class="form-group">
          <label>Executive Name</label>
          <select name="ex_name" id="ex_name" type="text" value="{{i.ex_name}}" class="form-control"
            aria-label="Default select example" aria-invalid="false">
            <option value="{{customer.ex_name}}">{{customer.ex_name}}</option>

            {% for i in executives %}
            <option value="{{i.ex_name}}"> {{i.ex_name}}</option>
            {% endfor %}
          </select>

        </div>


        <div class="form-group">
          <label>Company Name</label>
          <input name="company_name" type="text" class="form-control" required />

        </div>

        <div class="form-group">
          <label>Type of Client</label>
          <select name="type_of_client" onChange="changecat(this.value);" class="form-control">
            <option value="" disabled selected>Select Type of Client</option>
            <option value="New_Client">New Client</option>
            <option value="Existing_Client">Existing Client</option>
          </select>
        </div>

        <div class="form-group">
          <label>Status</label>
          <select name="category" id="category" class="form-control">
            <option value="" disabled selected>Select</option>
          </select>
        </div>




        <div class="form-group">
          <label> Client Name</label>
          <input name="name" type="text" class="form-control" required>


        </div>
        <div class="form-group">
          <label>Contact No</label>
          <input name="contact_detail" type="text" id="contact_detail" class="form-control"
            oninput="validateContactNumber()">
          <div id="contact_detail_message" style="display: none; color: red;">Contact number must be either 10
            or 12
            digits long.</div>
        </div>



        <div class="form-group">
          <label>Mail ID</label>
          <input name="mail_id" type="text" class="form-control">
        </div>

        <div class="form-group">
          <label>Address</label>
          <input name="address" type="text" class="form-control" required />

        </div>


        <div class="form-group">
          <label for="bday">Meeting Date</label>

          <input class="form-control" type="date" name="meeting_date" pattern="[0-9]{2}-[0-9]{2}-[0-9]{4}"
            required>
          <span class="validity"></span>
        </div>
        <div class="form-group">
          <label for="bday">Next Meeting Date</label>
          <input class="form-control" type="date" id="dt_end_date" name="next_meeting_date"
            pattern="[0-9]{2}-[0-9]{2}-[0-9]{4}">
          <span class="validity"></span>
        </div>

        <div class="form-group">
          <label>contract Value</label>
          <input name="amount" type="text" id="amount" class="form-control" oninput="validateAmount()">
          <div id="amount_message" style="display: none; color: red;">Amount must be a numeric value.</div>
        </div>


        <div class="form-group">
          <label>Advance</label>
          <input name="add_advance" id="add_advance" type="text" class="form-control"
            oninput="validateAdvance()">
          <div id="advance_message" class="text-danger" style="display: none; color: red;">Enter a valid numeric
            value for the advance.</div>
        </div>

        <div class="form-group">
          <label>Balance Payment</label>
          <input name="balance_payment" id="balance_payment" type="text" class="form-control">
        </div>
        <div class="form-group">
          <label for="activation_date">Activation Date</label>
          <input class="form-control" type="date" id="activation_date" name="activation_date"
            placeholder="YYYY-MM-DD">
        </div>
        <div class="form-group">
          <label for="renewal_date">Renewal Date</label>
          <input class="form-control" type="date" id="renewal_date" name="renewal_date"
            placeholder="YYYY-MM-DD">
        </div>
      </div>
      <div class="modal-footer">
        <input type="button" class="btn btn-default" data-dismiss="modal" value="Cancel">
        <input type="submit" class="btn btn-success" value="Add">
      </div>
      </form>
    </div>
  </div>
</div>
  </div>
  </div>



















  <script src="../static/vendor/global/global.min.js"></script>
  <script src="../static/vendor/chart.js/Chart.bundle.min.js"></script>
  <script src="../static/vendor/bootstrap-select/dist/js/bootstrap-select.min.js"></script>

  <!-- Dashboard 1 -->
  <script src="../static/js/dashboard/dashboard-1.js"></script>
  <script src="../static/vendor/draggable/draggable.js"></script>


  <!-- tagify -->
  <script src="../static/vendor/tagify/dist/tagify.js"></script>

  <script src="../static/vendor/datatables/js/jquery.dataTables.min.js"></script>
  <script src="../static/vendor/datatables/js/dataTables.buttons.min.js"></script>
  <script src="../static/vendor/datatables/js/buttons.html5.min.js"></script>
  <script src="../static/vendor/datatables/js/jszip.min.js"></script>
  <script src="../static/js/plugins-init/datatables.init.js"></script>

  <!-- Apex Chart -->

  <script src="../static/vendor/bootstrap-datetimepicker/js/moment.js"></script>
  <script src="../static/vendor/bootstrap-datetimepicker/js/bootstrap-datetimepicker.min.js"></script>


  <!-- Vectormap -->
  <script src="../static/vendor/jqvmap/js/jquery.vmap.min.js"></script>
  <script src="../static/vendor/jqvmap/js/jquery.vmap.world.js"></script>
  <script src="../static/vendor/jqvmap/js/jquery.vmap.usa.js"></script>
  <script src="../static/js/custom.js"></script>
  <script src="../static/js/deznav-init.js"></script>
  <script src="../static/js/demo.js"></script>



  <script>
    $(function () {
      var dtToday = new Date();

      var month = dtToday.getMonth() + 1;
      var day = dtToday.getDate();
      var year = dtToday.getFullYear();
      if (month < 10)
        month = '0' + month.toString();
      if (day < 10)
        day = '0' + day.toString();

      var minDate = year + '-' + month + '-' + day;

      $('#dt_end_date').attr('min', minDate);

      // Function to update the minimum date of the Next Meeting Date field
      function updateNextMeetingDateMinDate() {
        var meetingDateValue = $('[name="meeting_date"]').val();
        if (meetingDateValue) {
          $('[name="next_meeting_date"]').attr('min', meetingDateValue);
        } else {
          $('[name="next_meeting_date"]').attr('min', minDate);
        }
      }

      // Trigger the function when the page loads and when the Meeting Date field changes
      $('[name="meeting_date"]').on('change', function () {
        updateNextMeetingDateMinDate();
      });

      // Trigger the function on page load
      updateNextMeetingDateMinDate();
    });
  </script>


  <!-- Get manager and executive from branch -->
  <script>
    const branchibranch = document.getElementById('branch');
    const branchimanager_name = document.getElementById('manageri_name');
    const branchiex_name = document.getElementById('ex_name');

    branchibranch.addEventListener('change', () => {
      const selectedOption = branchibranch.options[branchibranch.selectedIndex];

      // Update the branch name field
      const branchNameElement = document.querySelector("select[name='branch_name']");
      branchNameElement.value = selectedOption.value;

      // The code below remains unchanged
      const selectedBranchID = selectedOption.value;
      fetch(`/get_all_info/${selectedBranchID}`)
        .then(response => response.json())
        .then(data => {
          branchimanager_name.value = data.manager;
          branchiex_name.value = data.executive;
        });
    });

  </script>





  <script>
    function validateAmount() {
      const amountInput = document.getElementById('amount');
      const amount = amountInput.value.trim();

      if (/^\d+$/.test(amount)) {
        document.getElementById('amount_message').style.display = 'none';
      } else {
        document.getElementById('amount_message').style.display = 'block';
      }
    }

  </script>


  <script>
    function validateContactNumber() {
      const contactNumberInput = document.getElementById('contact_detail');
      const contactNumber = contactNumberInput.value;

      if (contactNumber.length === 10 || contactNumber.length === 12) {
        document.getElementById('contact_detail_message').style.display = 'none';
      } else {
        document.getElementById('contact_detail_message').style.display = 'block';
      }
    }



  </script>

  <script>
    function validateAdvance() {
      const advanceInput = document.getElementById('add_advance');
      const advance = advanceInput.value.trim();

      if (/^\d+$/.test(advance)) {
        document.getElementById('advance_message').style.display = 'none';
      } else {
        document.getElementById('advance_message').style.display = 'block';
      }
    }

  </script>

  <script>
    var mealsByCategory = {
      New_Client: ["Interested", "Decline", "Converted", "To be called", "Fix Meeting"],
      Existing_Client: ["Same Package", "Upgraded", "Fix Meeting"],
    };

    function updateSubpointsOptions() {
      var typeOfClient = $("[name='type_of_client']").val();
      var subpointsSelect = $("#category");

      subpointsSelect.empty().append("<option value='' disabled selected>Select</option>");

      if (typeOfClient) {
        var subpoints = mealsByCategory[typeOfClient];
        for (const subpoint of subpoints) {
          subpointsSelect.append("<option>" + subpoint + "</option>");
        }
      }
    }

    function updateNextMeetingDateVisibility() {
      var typeOfClient = $("[name='type_of_client']").val();
      var selectedSubpoint = $("#category").val();
      var nextMeetingDateField = $("#dt_end_date");

      if (typeOfClient === "New_Client" && selectedSubpoint === "Decline") {
        nextMeetingDateField.attr("disabled", "disabled").hide();
      } else {
        nextMeetingDateField.removeAttr("disabled").show();
      }
    }

    // Trigger the functions when the page loads and on type_of_client change
    $(document).ready(function () {
      updateSubpointsOptions();
      updateNextMeetingDateVisibility();
    });

    $("[name='type_of_client']").change(function () {
      updateSubpointsOptions();
      updateNextMeetingDateVisibility();
    });

    $("#category").change(function () {
      updateNextMeetingDateVisibility();
    });
  </script>













  <!-- new -->
  <script>
    // Constants for pagination
    const rowsPerPage = 10;
    let currentPage = 1;
    let data = []; // Dynamically loaded data

    // Function to display table rows
    function displayTableRows() {
      const table = document.getElementById('table');
      const tbody = table.getElementsByTagName('tbody')[0];
      tbody.innerHTML = '';

      const startIndex = (currentPage - 1) * rowsPerPage;
      const endIndex = startIndex + rowsPerPage;

      for (let i = startIndex; i < endIndex && i < data.length; i++) {
        const row = tbody.insertRow();
        const cell1 = row.insertCell(0);
        const cell2 = row.insertCell(1);
        const cell3 = row.insertCell(2);
        const cell4 = row.insertCell(3);
        const cell5 = row.insertCell(4);
        const cell6 = row.insertCell(5);
        const cell7 = row.insertCell(6);
        const cell8 = row.insertCell(7);
        const cell9 = row.insertCell(8);
        const cell10 = row.insertCell(9);
        const cell11 = row.insertCell(10);
        const cell12 = row.insertCell(11);

        const cell13 = row.insertCell(12);
        const cell14 = row.insertCell(13);
        const cell15 = row.insertCell(14);
        const cell16 = row.insertCell(15);
        const cell17 = row.insertCell(16);
        const cell18 = row.insertCell(17);





        cell1.innerHTML = `<a style="color: black;" href="${data[i].company_url}">${data[i].id}</a>`;

        cell2.innerHTML = `<a style="color: black;" href="${data[i].company_url}">${data[i].branch_list}</a>`;
        cell3.innerHTML = `<a style="color: black;" href="${data[i].company_url}">${data[i].manager_name}</a>`;
        cell4.innerHTML = `<a style="color: black;" href="${data[i].company_url}">${data[i].ex_name}</a>`;
        cell5.innerHTML = `<a style="color: black;" href="${data[i].company_url}">${data[i].company_name}</a>`;
        cell6.innerHTML = `<a style="color: black;" href="${data[i].company_url}">${data[i].type_of_client}</a>`;
        cell7.innerHTML = `<a style="color: black;" href="${data[i].company_url}">${data[i].subpoints}</a>`;
        cell8.innerHTML = `<a style="color: black;" href="${data[i].company_url}">${data[i].name}</a>`;

        cell9.innerHTML = `<a style="color: black;" href="${data[i].company_url}">${data[i].contact_detail}</a>`;
        cell10.innerHTML = `<a style="color: black;" href="${data[i].company_url}">${data[i].address}</a>`;
        cell11.innerHTML = `<a style="color: black;" href="${data[i].company_url}">${data[i].updation_date}</a>`;
        cell12.innerHTML = `<a style="color: black;" href="${data[i].company_url}">${data[i].meeting_date}</a>`;
        cell13.innerHTML = `<a style="color: black;" href="${data[i].company_url}">${data[i].next_meeting_date}</a>`;
        cell14.innerHTML = `<a style="color: black;" href="${data[i].company_url}">${data[i].amount}</a>`;
        cell15.innerHTML = `<a style="color: black;" href="${data[i].company_url}">${data[i].add_advance}</a>`;
        cell16.innerHTML = `<a style="color: black;" href="${data[i].company_url}">${data[i].balance_payment}</a>`;

        cell17.innerHTML = `<a style="color: black;" href="${data[i].company_url}">${data[i].activation_date}</a>`;

        cell18.innerHTML = `<a style="color: black;" href="${data[i].company_url}">${data[i].renewal_date}</a>`;



        // Set text for additional columns
      }
    }

    // Function to update pagination buttons
    function updatePagination() {
      const pagination = document.getElementById('pagination');
      const totalPages = Math.ceil(data.length / rowsPerPage);

      let buttons = '';
      for (let i = 1; i <= totalPages; i++) {
        buttons += `<button onclick="goToPage(${i})">${i}</button>`;
      }

      pagination.innerHTML = buttons;
    }

    // Function to navigate to a specific page
    function goToPage(page) {
      currentPage = page;
      displayTableRows();
      updatePagination();
    }

    // Simulate data retrieval (replace with your actual data loading mechanism)
    setTimeout(() => {
      // Replace this with your data loading code
      data = [
        {% for customer in page_obj %}
            {
        id: '{{ customer.id }}',
        branch_list: '{{ customer.branch_list }}',
        manager_name: '{{ customer.manager_name }}',
        ex_name: '{{ customer.ex_name }}',
        company_name: '{{ customer.company_name }}',
        type_of_client: '{{ customer.type_of_client }}',
        subpoints: '{{ customer.subpoints }}',
        name: '{{ customer.name }}',
        contact_detail: '{{ customer.contact_detail }}',
        address: '{{ customer.address }}',
        updation_date: '{{ customer.updation_date | date:"M d, Y" }}',
        meeting_date: '{{ customer.meeting_date }}',
        next_meeting_date: '{{ customer.next_meeting_date }}',
        amount: '{{ customer.amount }}',
        add_advance: '{{ customer.add_advance }}',
        balance_payment: '{{ customer.balance_payment }}',


        activation_date: '{{ customer.activation_date }}',
        renewal_date: '{{ customer.renewal_date }}',
        company_url: '{% url "customer_detail" customer.id %}', // Add the URL




      },
      {% endfor %}
            // Add more data rows as needed
          ];

    displayTableRows();
    updatePagination();
        }, 0); // Simulate a delay for data loading (adjust as needed)

    // Search functionality
    // function searchFunction() {

    const searchInput = document.getElementById('searchInput');
    searchInput.addEventListener('input', function () {
      data = [
        {% for customer in page_obj %}
            {
        id: '{{ customer.id }}',
        branch_list: '{{ customer.branch_list }}',
        manager_name: '{{ customer.manager_name }}',
        ex_name: '{{ customer.ex_name }}',
        company_name: '{{ customer.company_name }}',
        type_of_client: '{{ customer.type_of_client }}',
        subpoints: '{{ customer.subpoints }}',
        name: '{{ customer.name }}',

        contact_detail: '{{ customer.contact_detail }}',
        address: '{{ customer.address }}',
        updation_date: '{{ customer.updation_date | date:"M d, Y" }}',
        meeting_date: '{{ customer.meeting_date }}',
        next_meeting_date: '{{ customer.next_meeting_date }}',
        amount: '{{ customer.amount }}',
        add_advance: '{{ customer.add_advance }}',
        balance_payment: '{{ customer.balance_payment }}',


        activation_date: '{{ customer.activation_date }}',
        renewal_date: '{{ customer.renewal_date }}',
        company_url: '{% url "customer_detail" customer.id %}', // Add the URL




      },
      {% endfor %}
            // Add more data rows as needed
          ];
    if (searchInput.value) {
      const searchText = this.value.toLowerCase();
      // Filter data based on search text
      const filteredData = data.filter(item =>
        item.name.toLowerCase().includes(searchText) ||
        item.branch_list.toLowerCase().includes(searchText) ||
        item.manager_name.toLowerCase().includes(searchText) ||
        item.ex_name.toLowerCase().includes(searchText) ||
        item.company_name.toLowerCase().includes(searchText) ||
        item.type_of_client.toLowerCase().includes(searchText) ||
        item.subpoints.toLowerCase().includes(searchText) ||
        item.contact_detail.toLowerCase().includes(searchText) ||
        item.address.toLowerCase().includes(searchText) ||
        item.meeting_date.toLowerCase().includes(searchText) ||
        item.amount.toLowerCase().includes(searchText) ||
        item.add_advance.toLowerCase().includes(searchText)


        // Add more columns for searching
      );

      // Update the data and pagination
      currentPage = 1;
      data = filteredData;
      displayTableRows();
      updatePagination();
    }
    else {
      data = data;
      displayTableRows();
      updatePagination();
    }
    
    
          
        });

  </script>




<script>
  // Function to filter data by date range
  function filterDataByDateRange() {
    const startDate = document.getElementById('startDate').value;
    const endDate = document.getElementById('endDate').value;
  
    const parsedStartDate = new Date(startDate);
    const parsedEndDate = new Date(endDate);
  
    if (isNaN(parsedStartDate.getTime()) || isNaN(parsedEndDate.getTime())) {
      return;
    }
  
    // Calculate the previous day from the selected start date
    const previousDay = new Date(parsedStartDate);
    previousDay.setDate(parsedStartDate.getDate() - 1);
  
    // Update the start date input field with the previous day's date
    // document.getElementById('startDate').value = startDate;
   
    const filteredData = data.filter(item => {
      const meetingDate = new Date(item.updation_date); // Assuming 'meeting_date' is the date field in your data
      return meetingDate >= previousDay && meetingDate <= parsedEndDate;
    });
  
    currentPage = 1;
    data = filteredData;
    displayTableRows();
    updatePagination();
  }
  
  // Add event listeners to date input fields
  const startDateInput = document.getElementById('startDate');
  const endDateInput = document.getElementById('endDate');
  
  startDateInput.addEventListener('input', filterDataByDateRange);
  endDateInput.addEventListener('input', filterDataByDateRange);
  
  </script>
 


  <script>
    // Function to update pagination buttons with ellipsis
    function updatePagination() {
      const pagination = document.getElementById('pagination');
      const totalPages = Math.ceil(data.length / rowsPerPage);
      const maxButtons = 5; // Define the maximum number of page buttons to display

      let buttons = '';

      // Calculate the start and end buttons based on the current page
      let startButton = Math.max(currentPage - Math.floor(maxButtons / 2), 1);
      let endButton = Math.min(startButton + maxButtons - 1, totalPages);

      // Ensure that there's at least a gap before the last few pages
      if (endButton === totalPages && totalPages > maxButtons) {
        startButton = Math.max(totalPages - maxButtons + 1, 1);
      }

      if (startButton > 1) {
        buttons += `<button onclick="goToPage(1)">1</button>`;
        if (startButton > 2) {
          buttons += '<span>...</span>';
        }
      }

      for (let i = startButton; i <= endButton; i++) {
        buttons += `<button onclick="goToPage(${i})">${i}</button>`;
      }

      if (endButton < totalPages) {
        if (endButton < totalPages - 1) {
          buttons += '<span>...</span>';
        }
        buttons += `<button onclick="goToPage(${totalPages})">${totalPages}</button>`;
      }

      pagination.innerHTML = buttons;
    }

  </script>

  <script>
    updatePagination()
  </script>


</body>

</html>